// scripts/seed-services.js - Seed para servicios de cl√≠nica est√©tica
import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

const services = [
  // TRATAMIENTOS FACIALES
  {
    name: 'Limpieza Facial Profunda',
    description: 'Eliminaci√≥n de impurezas, puntos negros y c√©lulas muertas. Incluye extracci√≥n, mascarilla hidratante y protector solar.',
    category: 'FACIAL',
    duration: 60,
    price: 8500,
    isActive: true,
    features: ['Extracci√≥n de comedones', 'Mascarilla purificante', 'Hidrataci√≥n profunda', 'Protector solar'],
    benefits: ['Piel m√°s limpia', 'Poros desobstruidos', 'Textura mejorada', 'Luminosidad natural'],
    contraindications: ['Acn√© inflamatorio severo', 'Ros√°cea activa', 'Herpes labial activo'],
    aftercare: ['Evitar maquillaje 24h', 'No tocar la zona tratada', 'Usar protector solar', 'Hidrataci√≥n constante']
  },
  {
    name: 'Peeling Qu√≠mico Superficial',
    description: 'Exfoliaci√≥n qu√≠mica suave con √°cidos frutales para renovar la piel y mejorar textura y luminosidad.',
    category: 'FACIAL',
    duration: 45,
    price: 12000,
    isActive: true,
    features: ['√Åcido glic√≥lico 20%', 'Neutralizaci√≥n segura', 'Mascarilla calmante', 'Crema regeneradora'],
    benefits: ['Renovaci√≥n celular', 'Reducci√≥n de manchas', 'Textura uniforme', 'Mayor luminosidad'],
    contraindications: ['Embarazo', 'Lactancia', 'Piel sensible', 'Exposici√≥n solar reciente'],
    aftercare: ['Protector solar obligatorio', 'No exfoliar por 1 semana', 'Hidrataci√≥n intensa', 'Evitar sol directo']
  },
  {
    name: 'Hidrofacial con Vitamina C',
    description: 'Tratamiento de hidrataci√≥n profunda con infusi√≥n de vitamina C y √°cido hialur√≥nico mediante tecnolog√≠a avanzada.',
    category: 'FACIAL',
    duration: 75,
    price: 15000,
    isActive: true,
    features: ['Limpieza con agua activada', 'Exfoliaci√≥n suave', 'Infusi√≥n de vitamina C', 'Masaje facial'],
    benefits: ['Hidrataci√≥n intensa', 'Antioxidante potente', 'Luminosidad inmediata', 'Reducci√≥n de l√≠neas finas'],
    contraindications: ['Alergia a vitamina C', 'Heridas abiertas', 'Infecciones cut√°neas'],
    aftercare: ['Mantener hidrataci√≥n', 'Protecci√≥n solar', 'No usar retinol por 3 d√≠as', 'Agua termal refrescante']
  },

  // TRATAMIENTOS CORPORALES  
  {
    name: 'Masaje Relajante Corporal',
    description: 'Masaje terap√©utico de cuerpo completo con aceites esenciales para liberar tensiones y estr√©s.',
    category: 'CORPORAL',
    duration: 90,
    price: 18000,
    isActive: true,
    features: ['Aceites esenciales premium', 'T√©cnicas suecas', 'Ambiente relajante', 'M√∫sica terap√©utica'],
    benefits: ['Reducci√≥n del estr√©s', 'Mejora circulaci√≥n', 'Relajaci√≥n muscular', 'Bienestar general'],
    contraindications: ['Fiebre', 'Infecciones', 'Heridas abiertas', 'Varices severas'],
    aftercare: ['Hidrataci√≥n abundante', 'Descanso', 'Evitar ejercicio intenso', 'Ducha tibia']
  },
  {
    name: 'Tratamiento Anticelul√≠tico',
    description: 'Protocolo intensivo para reducir celulitis con radiofrecuencia, drenaje linf√°tico y productos espec√≠ficos.',
    category: 'CORPORAL',
    duration: 120,
    price: 25000,
    isActive: true,
    features: ['Radiofrecuencia bipolar', 'Drenaje linf√°tico manual', 'Productos reductores', 'Vendas fr√≠as'],
    benefits: ['Reducci√≥n de celulitis', 'Mejora textura piel', 'Drenaje de toxinas', 'Reafirmaci√≥n'],
    contraindications: ['Embarazo', 'Marcapasos', 'Trombosis', 'C√°ncer'],
    aftercare: ['Ejercicio regular', 'Dieta balanceada', 'Hidrataci√≥n', 'Masajes caseros']
  },

  // TRATAMIENTOS L√ÅSER
  {
    name: 'Depilaci√≥n L√°ser Piernas Completas',
    description: 'Eliminaci√≥n permanente del vello en piernas completas con tecnolog√≠a l√°ser de diodo de √∫ltima generaci√≥n.',
    category: 'LASER',
    duration: 60,
    price: 22000,
    isActive: true,
    features: ['L√°ser de diodo 808nm', 'Sistema de enfriamiento', 'M√∫ltiples fototipos', 'Resultados permanentes'],
    benefits: ['Eliminaci√≥n permanente', 'Piel suave', 'Sin vellos encarnados', 'Ahorro a largo plazo'],
    contraindications: ['Embarazo', 'Bronceado reciente', 'Medicamentos fotosensibilizantes', 'Queloides'],
    aftercare: ['Evitar sol por 2 semanas', 'No depilarse entre sesiones', 'Hidrataci√≥n diaria', 'Protector solar']
  },
  {
    name: 'Rejuvenecimiento Facial con IPL',
    description: 'Tratamiento de fotorrejuvenecimiento para manchas, ros√°cea y mejora general de la textura de la piel.',
    category: 'LASER',
    duration: 45,
    price: 18000,
    isActive: true,
    features: ['Luz pulsada intensa', 'Filtros espec√≠ficos', 'Gel conductor', 'Sistema de enfriamiento'],
    benefits: ['Reducci√≥n de manchas', 'Mejora ros√°cea', 'Estimula col√°geno', 'Textura uniforme'],
    contraindications: ['Embarazo', 'Bronceado', 'Medicamentos fotosensibles', 'Melasma severo'],
    aftercare: ['Protecci√≥n solar estricta', 'Hidrataci√≥n', 'No exfoliar por 1 semana', 'Cremas calmantes']
  },

  // MEDICINA EST√âTICA
  {
    name: 'Aplicaci√≥n de √Åcido Hialur√≥nico Labial',
    description: 'Aumento y definici√≥n labial con √°cido hialur√≥nico de alta calidad para resultados naturales.',
    category: 'MEDICINA_ESTETICA',
    duration: 30,
    price: 35000,
    isActive: true,
    features: ['√Åcido hialur√≥nico reticulado', 'Anestesia t√≥pica', 'T√©cnica microc√°nula', 'Resultados inmediatos'],
    benefits: ['Volumen natural', 'Hidrataci√≥n labial', 'Resultados duraderos', 'M√≠nima molestia'],
    contraindications: ['Embarazo', 'Lactancia', 'Herpes labial activo', 'Alergias conocidas'],
    aftercare: ['Hielo las primeras horas', 'No besar por 24h', 'Evitar ejercicio intenso', 'Hidrataci√≥n labial']
  },
  {
    name: 'Toxina Botul√≠nica - Entrecejo',
    description: 'Aplicaci√≥n de toxina botul√≠nica para suavizar arrugas de expresi√≥n en zona del entrecejo.',
    category: 'MEDICINA_ESTETICA',
    duration: 20,
    price: 28000,
    isActive: true,
    features: ['Botox original', 'T√©cnica precisa', 'Agujas ultrafinas', 'Resultados graduales'],
    benefits: ['Suaviza arrugas', 'Previene nuevas l√≠neas', 'Efecto natural', 'Duraci√≥n 4-6 meses'],
    contraindications: ['Embarazo', 'Lactancia', 'Enfermedades neuromusculares', 'Infecci√≥n local'],
    aftercare: ['No acostarse 4 horas', 'No ejercicio intenso', 'No masajear zona', 'Paciencia con resultados']
  },

  // TRATAMIENTOS VIP
  {
    name: 'Ritual Facial Diamante VIP',
    description: 'Experiencia premium con microdermoabrasi√≥n diamante, mascarilla de oro y masaje facial exclusivo.',
    category: 'VIP',
    duration: 120,
    price: 45000,
    isActive: true,
    isVipOnly: true,
    features: ['Microdermoabrasi√≥n diamante', 'Mascarilla de oro 24k', 'Masaje facial premium', 'Ambiente exclusivo'],
    benefits: ['Renovaci√≥n celular m√°xima', 'Luminosidad excepcional', 'Experiencia de lujo', 'Resultados inmediatos'],
    contraindications: ['Piel muy sensible', 'Ros√°cea severa', 'Heridas abiertas'],
    aftercare: ['Cuidados premium incluidos', 'Productos de mantenimiento', 'Seguimiento personalizado']
  },
  {
    name: 'Paquete Corporal Detox VIP',
    description: 'Tratamiento completo de desintoxicaci√≥n corporal con envolturas, drenaje linf√°tico y sauna infrarroja.',
    category: 'VIP',
    duration: 150,
    price: 55000,
    isActive: true,
    isVipOnly: true,
    features: ['Envoltura detox', 'Drenaje linf√°tico completo', 'Sauna infrarroja', 'Hidrataci√≥n premium'],
    benefits: ['Eliminaci√≥n de toxinas', 'Reducci√≥n de medidas', 'Relajaci√≥n profunda', 'Piel renovada'],
    contraindications: ['Embarazo', 'Problemas card√≠acos', 'Presi√≥n arterial alta'],
    aftercare: ['Hidrataci√≥n constante', 'Dieta liviana', 'Descanso', 'Productos de mantenimiento']
  },

  // TRATAMIENTOS ESPECIALES
  {
    name: 'Radiofrecuencia Facial',
    description: 'Tratamiento de reafirmaci√≥n facial con radiofrecuencia monopolar para estimular la producci√≥n de col√°geno.',
    category: 'FACIAL',
    duration: 60,
    price: 20000,
    isActive: true,
    features: ['Radiofrecuencia monopolar', 'Control de temperatura', 'Gel conductor', 'Masaje final'],
    benefits: ['Reafirmaci√≥n facial', 'Estimula col√°geno', 'Mejora flacidez', 'Sin tiempo recuperaci√≥n'],
    contraindications: ['Embarazo', 'Marcapasos', 'Implantes met√°licos', 'C√°ncer'],
    aftercare: ['Hidrataci√≥n intensa', 'Protecci√≥n solar', 'Evitar calor extremo', 'Masajes suaves']
  },
  {
    name: 'Mesoterapia Facial',
    description: 'Revitalizaci√≥n facial mediante microinyecciones de vitaminas, minerales y √°cido hialur√≥nico.',
    category: 'MEDICINA_ESTETICA',
    duration: 45,
    price: 32000,
    isActive: true,
    features: ['Microinyecciones precisas', 'C√≥ctel vitam√≠nico', '√Åcido hialur√≥nico', 'T√©cnica francesa'],
    benefits: ['Hidrataci√≥n profunda', 'Luminosidad', 'Mejora textura', 'Estimula renovaci√≥n'],
    contraindications: ['Embarazo', 'Lactancia', 'Alergias', 'Infecciones activas'],
    aftercare: ['Evitar maquillaje 24h', 'No tocar la zona', 'Protecci√≥n solar', 'Hidrataci√≥n']
  }
];

async function seedServices() {
  try {
    console.log('üå± Iniciando seed de servicios...');

    // Obtener la primera cl√≠nica para asociar los servicios
    const clinic = await prisma.clinic.findFirst();
    
    if (!clinic) {
      console.error('‚ùå No se encontraron cl√≠nicas. Ejecuta primero el seed principal.');
      return;
    }

    console.log(`üìç Asociando servicios a cl√≠nica: ${clinic.name}`);

    // Limpiar servicios existentes
    await prisma.service.deleteMany({});
    console.log('üóëÔ∏è Servicios existentes eliminados');

    // Crear servicios
    const createdServices = [];
    
    for (const serviceData of services) {
      const service = await prisma.service.create({
        data: {
          ...serviceData,
          clinicId: clinic.id
        }
      });
      createdServices.push(service);
      console.log(`‚úÖ Servicio creado: ${service.name} - $${service.price}`);
    }

    console.log('\nüìä Resumen de servicios creados:');
    console.log(`‚Ä¢ Total de servicios: ${createdServices.length}`);
    console.log(`‚Ä¢ Servicios faciales: ${createdServices.filter(s => s.category === 'FACIAL').length}`);
    console.log(`‚Ä¢ Servicios corporales: ${createdServices.filter(s => s.category === 'CORPORAL').length}`);
    console.log(`‚Ä¢ Servicios l√°ser: ${createdServices.filter(s => s.category === 'LASER').length}`);
    console.log(`‚Ä¢ Medicina est√©tica: ${createdServices.filter(s => s.category === 'MEDICINA_ESTETICA').length}`);
    console.log(`‚Ä¢ Servicios VIP: ${createdServices.filter(s => s.category === 'VIP').length}`);
    
    console.log('\nüí∞ Rango de precios:');
    const prices = createdServices.map(s => s.price);
    console.log(`‚Ä¢ Precio m√≠nimo: $${Math.min(...prices)}`);
    console.log(`‚Ä¢ Precio m√°ximo: $${Math.max(...prices)}`);
    console.log(`‚Ä¢ Precio promedio: $${Math.round(prices.reduce((a, b) => a + b, 0) / prices.length)}`);

    console.log('\nüéâ Seed de servicios ejecutado exitosamente!');

  } catch (error) {
    console.error('‚ùå Error ejecutando seed de servicios:', error);
    throw error;
  } finally {
    await prisma.$disconnect();
  }
}

// Ejecutar si es llamado directamente
if (import.meta.url === `file://${process.argv[1]}`) {
  seedServices()
    .catch((error) => {
      console.error(error);
      process.exit(1);
    });
}

export { seedServices };